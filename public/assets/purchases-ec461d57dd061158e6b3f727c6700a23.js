(function(){var e;jQuery(function(){return Stripe.setPublishableKey($('meta[name="stripe-key"]').attr("content")),e.setupForm()}),e={setupForm:function(){return $("#new_purchase").submit(function(){return $("input[type=submit]").attr("disabled",!0),$("#card_number").length?(e.processCard(),!1):!0})},processCard:function(){var t;return t={number:$("#card_number").val(),cvc:$("#card_code").val(),expMonth:$("#card_month").val(),expYear:$("#card_year").val()},Stripe.createToken(t,e.handleStripeResponse)},handleStripeResponse:function(e,t){return e===200?($("#new_purchase").append($('<input type="hidden" name="stripeToken" />').val(t.id)),$("#new_purchase")[0].submit()):($("#stripe_error").text(t.error.message),$("input[type=submit]").attr("disabled",!1))}}}).call(this);